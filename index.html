<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Guitar Transient Demo</title>
  <script src="https://unpkg.com/tone@latest/build/Tone.js"></script>
</head>
<body>
  <button id="play">Play Transient</button>

  <script>
    // === CLICK (very short noise burst) ===
    const clickNoise = new Tone.Noise("white");
    const clickFilter = new Tone.Filter({
      type: "highpass",
      frequency: 4000
    });
    const clickEnv = new Tone.AmplitudeEnvelope({
      attack: 0.0001,
      decay: 0.002,
      sustain: 0,
      release: 0.001
    });

    clickNoise.connect(clickFilter);
    clickFilter.connect(clickEnv);
    clickEnv.toDestination();


    // === SCRAPE (longer filtered noise) ===
    const scrapeNoise = new Tone.Noise("white");
    const scrapeFilter = new Tone.Filter({
      type: "highpass",
      frequency: 2000
    });
    const scrapeEnv = new Tone.AmplitudeEnvelope({
      attack: 0.0001,
      decay: 0.03,
      sustain: 0,
      release: 0.005
    });

    scrapeNoise.connect(scrapeFilter);
    scrapeFilter.connect(scrapeEnv);
    scrapeEnv.toDestination();


    // === TRIGGER ===
    document.getElementById("play").addEventListener("click", async () => {
      await Tone.start();

      const now = Tone.now();

      // CLICK
      clickNoise.start(now);
      clickEnv.triggerAttack(now);
      clickNoise.stop(now + 0.01); // 10ms

      // SCRAPE
      scrapeNoise.start(now);
      scrapeEnv.triggerAttack(now);
      scrapeNoise.stop(now + 0.05); // 50ms
    });
  </script>
</body>
</html>
